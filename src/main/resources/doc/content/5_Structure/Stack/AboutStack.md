#### 关于栈

```text
概念:
栈(Stack)是一种运算受限的线性表。
限定仅在表尾进行插入和删除操作的线性表，这一端被称为栈顶。
相对地，把另一端称为栈底。
向一个栈插入新元素又称作进栈、入栈或压栈，它是把新元素放到栈顶元素的上面，使之成为新的栈顶元素；
从一个栈删除元素又称作出栈或退栈，它是把栈顶元素删除掉，使其相邻的元素成为新的栈顶元素。

核心:
只能在一端进行插入和删除操作
```

#### 栈的运用

一:函数调用

在Java中，每个线程都会拥有自己的栈空间，当我们调用方法时，会在栈中压入一个栈帧，用来存储这个方法的参数和局部变量，
当方法返回时，栈帧就会弹出，方法的参数和局部变量就会清除。

如果调用的层级过深，调用栈可能会溢出(可以使用尾调用优化)。


关于采用栈作为函数调用信息的存储的原因，笔者也不是很透彻，下面附上网上搜的答案参考一下:

**一个函数设计里面，有2个问题：**

1.是参数传递的问题。传递参数的目的，是为了代码可以重用，让一种方法可以应用到更多的场合，而不需要为N种情况写N套类似的代码。那用什么方法来做参数的传递，可以选择:

a.为了速度快，使用cpu的寄存器传递参数。这会碰到一个问题，cpu寄存器的数量是有限的，当函数内再想调用子函数的时候，再使用原有的cpu寄存器就会冲突了。想利用寄存器传参，就必须在调用子函数前吧寄存器存储起来，然后当函数退出的时候再恢复。

b.利用某些ram的区域来传递参数。这和上面a的情况几乎一样，当函数嵌套调用的时候，还是会出现冲突，依然面临要把原本数据保存到其他地方，再调用嵌套函数。并且保存到什么地方，也面临困难，无论临时存储到哪里，都会有上面传递参数一样的困境。

2.函数里面必然要使用到局部变量，而不能总是用全局变量。则局部变量存储到哪里合适，即不能让函数嵌套的时候有冲突，又要注重效率。

以上问题的解决办法，都可以利用栈的结构体来解决，寄存器传参的冲突，可以把寄存器的值临时压入栈里面，非寄存器传参也可以压入到栈里面，局部变量的使用也可以利用栈里面的内存空间，只需要移动下栈指针，腾出局部变量占用的空间。最后利用栈指针的偏移来完成存取。于是函数的这些参数和变量的存储演变成记住一个栈指针的地址，每次函数被调用的时候，都配套一个栈指针地址，即使循环嵌套调用函数，只要对应函数栈指针是不同的，也不会出现冲突。利用栈，当函数不断调用的时候，不断的有参数局部变量入栈，栈里面会形成一个函数栈帧的结构，一个栈帧结构归属于一次函数的调用。栈的空间也是有限的，如果不限制的使用，就会出现典型的栈溢出的问题。有了栈帧的框架在，我们在分析问题的时候，如果能获取到当时的栈的内容，则有机会调查当时可能出现的问题。









